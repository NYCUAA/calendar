<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYCUAA å„ªè³ªæ´»å‹•æ•´ç†åŒ…</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px 15px;
            min-height: 100vh;
        }

        /* æ¨™é¡Œå€å¡Š */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            animation: fadeInDown 0.6s ease-out;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .disclaimer {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 15px;
            margin-top: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
        }

        /* æœˆä»½é¸æ“‡å™¨ */
        .month-selector {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 10px 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.8s ease-out;
        }

        /* åœ–ä¾‹ */
        .legend {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 12px 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.9s ease-out;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #555;
            font-weight: 500;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .alumni-color {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .other-color {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        /* æ´»å‹•èªªæ˜å€å¡Š */
        .event-description {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            backdrop-filter: blur(10px);
            animation: fadeIn 1s ease-out;
            text-align: center;
        }

        .event-description p {
            font-size: 12px;
            line-height: 1.6;
            color: #555;
            margin: 0;
            font-weight: 500;
        }

        .month-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .month-nav button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
        }

        .month-nav button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .month-nav button:active {
            transform: scale(0.95);
        }

        .month-display {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        /* è¡Œäº‹æ›†å®¹å™¨ */
        .calendar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        /* æ—¥æ›†æ»‘å‹•å®¹å™¨ */
        .calendar-swipe-container {
            position: relative;
            width: 100%;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .calendar-swipe-container.no-transition {
            transition: none;
        }

        .calendar-swipe-container.fast-transition {
            transition: transform 0.2s ease-out;
        }

        /* æ˜ŸæœŸæ¨™é¡Œ */
        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            margin-bottom: 10px;
            padding: 10px 0;
            border-bottom: 2px solid #f0f0f0;
        }

        .weekday {
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            color: #666;
        }

        /* æ—¥æœŸæ ¼å­ */
        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .day {
            min-height: 120px;
            border-radius: 12px;
            padding: 8px 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .day:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .day-number {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #333;
        }

        .day.other-month {
            opacity: 0.3;
        }

        /* ä»Šå¤©çš„æ¨£å¼ */
        .day.today {
            background: #f8f9fa;
            color: #333;
            font-weight: 700;
            border: 2px solid #667eea;
            box-shadow: 0 0 0 1px rgba(102, 126, 234, 0.2);
            transform: scale(1.02);
            animation: todayBorder 2s ease-in-out infinite;
            position: relative;
        }

        .day.today::before {
            content: 'ä»Š';
            position: absolute;
            top: -6px;
            right: -6px;
            background: #667eea;
            color: white;
            font-size: 9px;
            font-weight: 700;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
            z-index: 10;
        }

        .day.today .day-number {
            color: #667eea;
            font-weight: 700;
        }

        /* ä»Šå¤©æœ‰æ´»å‹•æ™‚çš„ç‰¹æ®Šè™•ç† */
        .day.today.has-events {
            border: 2px solid #667eea;
            box-shadow: 0 0 0 1px rgba(102, 126, 234, 0.2);
        }

        .day.today.has-events.alumni-events {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: 2px solid #8b9dc3;
        }

        .day.today.has-events.other-events {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: 2px solid #667eea;
        }

        @keyframes todayBorder {
            0%, 100% { 
                box-shadow: 0 0 0 1px rgba(102, 126, 234, 0.2);
            }
            50% { 
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
            }
        }

        /* éå»æ—¥æœŸçš„æ¨£å¼ */
        .day.past {
            background: #e9ecef;
            color: #6c757d;
            opacity: 0.7;
        }

        .day.past .day-number {
            color: #6c757d;
        }

        .day.past.has-events {
            background: linear-gradient(135deg, #dee2e6 0%, #adb5bd 100%);
            color: #6c757d;
        }

        .day.past.has-events.alumni-events {
            background: linear-gradient(135deg, #9fa8da 0%, #7986cb 100%);
            color: #5c6bc0;
            opacity: 0.8;
        }

        .day.past.has-events.other-events {
            background: linear-gradient(135deg, #f48fb1 0%, #e91e63 100%);
            color: #ad1457;
            opacity: 0.8;
        }

        .day.has-events {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
            font-weight: 600;
        }

        /* æ ¡å‹æœƒæ´»å‹•æ¨£å¼ */
        .day.has-events.alumni-events {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        /* å…¶ä»–æ´»å‹•æ¨£å¼ */
        .day.has-events.other-events {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }



        .event-list {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-top: 4px;
            overflow: hidden;
        }

        .event-item {
            font-size: 9px;
            line-height: 1.3;
            background: rgba(255, 255, 255, 0.7);
            padding: 3px 4px;
            border-radius: 4px;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            white-space: normal;
            color: #444;
            font-weight: 500;
            position: relative;
            max-height: 26px;
            word-break: break-word;
            min-height: 20px;
        }

        .event-item.alumni {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .event-item.other {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* éå»æ´»å‹•é …ç›®çš„æ¨£å¼ */
        .event-item.past {
            background: rgba(173, 181, 189, 0.6);
            color: #6c757d;
            border: 1px solid rgba(173, 181, 189, 0.3);
            text-decoration: line-through;
            opacity: 0.8;
        }

        /* ä»Šå¤©æ´»å‹•é …ç›®çš„æ¨£å¼ */
        .event-item.today {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border: 1px solid #667eea;
            font-weight: 600;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.2);
            position: relative;
        }

        .event-item.today::after {
            content: 'â—';
            position: absolute;
            top: -1px;
            left: -1px;
            color: #667eea;
            font-size: 8px;
            font-weight: 700;
        }

        /* è·¨æ—¥æ´»å‹•æ¨£å¼ */
        .event-item.multi-day {
            position: relative;
            border-radius: 4px;
        }

        .event-item.multi-day-start {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.6) 100%);
        }

        .event-item.multi-day-start::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: currentColor;
            opacity: 0.5;
            border-radius: 0 2px 2px 0;
        }

        .event-item.multi-day-middle {
            border-radius: 0;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.6) 100%);
            border-left: 1px solid currentColor;
            border-right: 1px solid currentColor;
            border-left-color: rgba(255, 255, 255, 0.8);
            border-right-color: rgba(255, 255, 255, 0.8);
        }

        .event-item.multi-day-middle::before,
        .event-item.multi-day-middle::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: currentColor;
            opacity: 0.3;
        }

        .event-item.multi-day-middle::before {
            left: 0;
        }

        .event-item.multi-day-middle::after {
            right: 0;
        }

        .event-item.multi-day-end {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.9) 100%);
        }

        .event-item.multi-day-end::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: currentColor;
            opacity: 0.5;
            border-radius: 2px 0 0 2px;
        }



        /* Modal æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideUp 0.4s ease-out;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
            color: #333;
            flex: 1;
            margin-right: 10px;
        }

        .modal-header-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .close-btn {
            background: #f0f0f0;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background: #e0e0e0;
            transform: rotate(90deg);
        }

        /* éºµåŒ…å±‘ */
        .modal-disclaimer {
            font-size: 12px;
            color: #666;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            line-height: 1.4;
        }

        .breadcrumb {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .breadcrumb-item {
            background: #f0f0f0;
            color: #666;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        /* æ´»å‹•é€£çµæŒ‰éˆ• */
        .event-link {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            margin: 15px 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .event-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* æ´»å‹•åŸºæœ¬è³‡è¨Š */
        .event-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .event-info-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 1.5;
        }

        .event-info-item:last-child {
            margin-bottom: 0;
        }

        .event-info-label {
            font-weight: 600;
            color: #333;
            min-width: 80px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .event-info-value {
            color: #555;
            flex: 1;
            word-break: break-word;
        }

        /* æ´»å‹•å…§å®¹ */
        .event-content {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 14px;
            line-height: 1.6;
            color: #555;
        }

        /* æ´»å‹•åˆ—è¡¨æ¨£å¼ */
        .events-list-container {
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .event-list-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .event-list-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .event-list-item.alumni {
            border-left-color: #667eea;
        }

        .event-list-item.other {
            border-left-color: #f093fb;
        }

        .event-list-header {
            margin-bottom: 8px;
        }

        .event-list-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .event-list-meta {
            margin-bottom: 8px;
        }

        .event-list-category {
            display: inline-block;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            margin-right: 6px;
            font-weight: 500;
        }

        .event-list-category.alumni {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .event-list-category.other {
            background: rgba(240, 147, 251, 0.1);
            color: #f093fb;
        }

        .event-list-description {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* è¿‘æœŸæ´»å‹• Modal æ¨£å¼ */
        .upcoming-modal {
            max-width: 600px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
        }

        .upcoming-events-list {
            flex: 1;
            overflow-y: auto;
            margin: 20px 0;
            min-height: 0;
        }

        .upcoming-event-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upcoming-event-item:hover {
            background: #e9ecef;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .upcoming-event-item.alumni {
            border-left-color: #667eea;
        }

        .upcoming-event-item.other {
            border-left-color: #f093fb;
        }

        .upcoming-event-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .upcoming-event-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            flex: 1;
            margin-right: 10px;
        }

        .upcoming-event-date {
            font-size: 12px;
            color: #666;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 8px;
            white-space: nowrap;
        }

        .upcoming-event-category {
            display: inline-block;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            margin-right: 6px;
            font-weight: 500;
        }

        .upcoming-event-category.alumni {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .upcoming-event-category.other {
            background: rgba(240, 147, 251, 0.1);
            color: #f093fb;
        }

        .upcoming-event-description {
            font-size: 13px;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .upcoming-modal-footer {
            text-align: center;
            padding: 20px 0 0 0;
            border-top: 1px solid #e9ecef;
            flex-shrink: 0;
            margin-top: auto;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .no-upcoming-events {
            text-align: center;
            padding: 20px;
            color: #666;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 200px;
        }

        .no-upcoming-events .icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* å‹•ç•« */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            text-align: center;
            padding: 40px;
            color: white;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 24px;
            }
            
            .disclaimer {
                font-size: 11px;
                padding: 6px 12px;
            }
            
            .modal-disclaimer {
                font-size: 11px;
                padding: 8px 12px;
            }
            
            .legend {
                gap: 15px;
                padding: 10px 12px;
            }
            
            .legend-item {
                font-size: 11px;
            }
            
            .legend-color {
                width: 14px;
                height: 14px;
            }
            
            .month-display {
                font-size: 16px;
            }
            
            .day {
                font-size: 12px;
                min-height: 140px;
                padding: 6px 4px;
            }
            
            .event-item {
                font-size: 8px;
                line-height: 1.4;
                padding: 3px 3px;
                max-height: 28px;
                min-height: 22px;
                -webkit-line-clamp: 3;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }

            .modal-header {
                align-items: flex-start;
                margin-bottom: 15px;
            }

            .modal-title {
                font-size: 18px;
                margin-right: 10px;
                line-height: 1.3;
            }

            .back-btn {
                font-size: 12px;
                padding: 6px 12px;
            }

            .event-list-item {
                padding: 12px;
            }

            .event-list-title {
                font-size: 14px;
            }

            .events-list-container {
                max-height: 300px;
            }

            .upcoming-modal {
                max-height: 90vh;
            }

            .upcoming-events-list {
                margin: 15px 0;
            }

            .upcoming-event-item {
                padding: 12px;
            }

            .upcoming-event-title {
                font-size: 14px;
            }

            .upcoming-modal-footer {
                padding: 15px 0 0 0;
            }

            .no-upcoming-events {
                padding: 15px;
                min-height: 150px;
            }

            .no-upcoming-events .icon {
                font-size: 36px;
                margin-bottom: 10px;
            }

            .event-description {
                padding: 12px 15px;
                margin-bottom: 15px;
            }

            .event-description p {
                font-size: 11px;
                line-height: 1.5;
            }
            
            .event-info {
                padding: 12px;
                margin: 12px 0;
            }
            
            .event-info-item {
                font-size: 13px;
                margin-bottom: 8px;
            }
            
            .event-info-label {
                min-width: 70px;
                margin-right: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>NYCUAA å„ªè³ªæ´»å‹•æ•´ç†åŒ…ï¼</h1>
            <div class="disclaimer">
                æ­¤è¡Œäº‹æ›†èˆ‡æˆªå–æ–‡å­—ç‚º AI æ•´ç†ï¼Œå¯èƒ½æœ‰éŒ¯èª¤æˆ–æ´»å‹•å¯èƒ½æœƒæ›´æ–°è³‡è¨Šï¼Œè©³æƒ…è«‹è‡³æ´»å‹•é€£çµæŸ¥çœ‹è©³æƒ…
            </div>
        </div>

        <div class="event-description">
            <p>é™½æ˜äº¤å¤§æ ¡å‹ç¸½æœƒç‚ºå„ä½æ•´ç†é™¤äº†æœ¬æœƒèˆ‰è¾¦çš„æ´»å‹•å¤–ï¼Œä¹ŸåŒæ™‚æ•´ç†å„å€‹åœ°å€æ ¡å‹æœƒæ‰€èˆ‰è¾¦çš„æ´»å‹•ï¼ŒåŠå„å¤§æ ¡å‹å¯èƒ½æœƒæœ‰èˆˆè¶£çš„æ´»å‹•ï¼ˆæ¨™è¨˜ç‚ºã€Œéæ ¡å‹æœƒæ´»å‹•ã€ï¼‰ï¼Œä¾›å„ä½å­¸é•·å§åƒè€ƒ</p>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color alumni-color"></div>
                <span>æ ¡å‹æœƒç›¸é—œæ´»å‹•</span>
            </div>
            <div class="legend-item">
                <div class="legend-color other-color"></div>
                <span>éæ ¡å‹æœƒæ´»å‹•</span>
            </div>
        </div>

        

        <div class="month-selector">
            <div class="month-nav">
                <button id="prevMonth">â€¹</button>
                <div class="month-display" id="currentMonth"></div>
                <button id="nextMonth">â€º</button>
            </div>
        </div>

        <div class="calendar" id="calendar">
            <div class="calendar-swipe-container" id="calendarSwipeContainer">
                <div class="weekdays">
                    <div class="weekday">æ—¥</div>
                    <div class="weekday">ä¸€</div>
                    <div class="weekday">äºŒ</div>
                    <div class="weekday">ä¸‰</div>
                    <div class="weekday">å››</div>
                    <div class="weekday">äº”</div>
                    <div class="weekday">å…­</div>
                </div>
                <div class="days" id="calendarDays"></div>
            </div>
        </div>

        <div class="loading" id="loading">è¼‰å…¥ä¸­...</div>
    </div>

    <!-- è¿‘æœŸæ´»å‹• Modal -->
    <div class="modal" id="upcomingEventsModal">
        <div class="modal-content upcoming-modal">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ“… è¿‘å…©é€±æ´»å‹•é è¦½</h2>
                <button class="close-btn" id="closeUpcomingModal">Ã—</button>
            </div>
            <div class="modal-disclaimer">
                æ­¤è¡Œäº‹æ›†èˆ‡æˆªå–æ–‡å­—ç‚º AI æ•´ç†ï¼Œå¯èƒ½æœ‰éŒ¯èª¤æˆ–æ´»å‹•å¯èƒ½æœƒæ›´æ–°è³‡è¨Šï¼Œè©³æƒ…è«‹è‡³æ´»å‹•é€£çµæŸ¥çœ‹è©³æƒ…
            </div>
            <div class="upcoming-events-list" id="upcomingEventsList"></div>
            <div class="upcoming-modal-footer">
                <button class="btn-primary" id="closeUpcomingBtn">æŸ¥çœ‹å®Œæ•´è¡Œäº‹æ›†</button>
            </div>
        </div>
    </div>

    <!-- æ´»å‹•è©³æƒ… Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle"></h2>
                <div class="modal-header-buttons">
                    <button class="back-btn" id="backToList" style="display: none;" onclick="backToEventsList()">â† è¿”å›åˆ—è¡¨</button>
                    <button class="close-btn" id="closeModal">Ã—</button>
                </div>
            </div>
            <div class="modal-disclaimer">
                æ­¤è¡Œäº‹æ›†èˆ‡æˆªå–æ–‡å­—ç‚º AI æ•´ç†ï¼Œå¯èƒ½æœ‰éŒ¯èª¤æˆ–æ´»å‹•å¯èƒ½æœƒæ›´æ–°è³‡è¨Šï¼Œè©³æƒ…è«‹è‡³æ´»å‹•é€£çµæŸ¥çœ‹è©³æƒ…
            </div>
            
            <!-- æ´»å‹•åˆ—è¡¨è¦–åœ– -->
            <div id="eventsList" style="display: none;">
                <div class="events-list-container" id="eventsListContainer"></div>
            </div>
            
            <!-- å–®ä¸€æ´»å‹•è©³æƒ…è¦–åœ– -->
            <div id="eventDetails">
                <div class="breadcrumb" id="breadcrumb"></div>
                
                <!-- æ´»å‹•åŸºæœ¬è³‡è¨Š -->
                <div class="event-info" id="eventInfo"></div>
                
                <a href="#" class="event-link" id="eventLink" target="_blank">æŸ¥çœ‹æ´»å‹•è©³æƒ…</a>
                <div class="event-content" id="eventContent"></div>
            </div>
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let events = [];

        // åˆå§‹åŒ–
        async function init() {
            await fetchEvents();
            renderCalendar();
            setupEventListeners();
        }

        // ç²å–æ´»å‹•è³‡æ–™
        async function fetchEvents() {
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbxjjN8DDmMOrJMspica_wU5Hjq-gs0T1A6X0oX1M371HKpygz5bepcYAmtP3L9uUyY/exec?key=NYCUAA');
                const data = await response.json();
                console.log('API Response:', data);
                
                if (data.success) {
                    events = data.data.map(event => {
                        const startDate = new Date(event['é–‹å§‹æ™‚é–“']);
                        // å¦‚æœçµæŸæ™‚é–“ç¼ºå¤±æˆ–ç„¡æ•ˆï¼Œä½¿ç”¨é–‹å§‹æ™‚é–“ä½œç‚ºçµæŸæ™‚é–“
                        let endDate = new Date(event['çµæŸæ™‚é–“']);
                        if (!event['çµæŸæ™‚é–“'] || isNaN(endDate.getTime())) {
                            endDate = new Date(startDate);
                        }
                        
                        return {
                            ...event,
                            startDate: startDate,
                            endDate: endDate
                        };
                    });
                    document.getElementById('loading').style.display = 'none';
                    
                    // é¡¯ç¤ºè¿‘æœŸæ´»å‹•modal
                    showUpcomingEventsModal();
                } else {
                    console.error(data.message);
                }
            } catch (error) {
                console.error('è¼‰å…¥æ´»å‹•è³‡æ–™å¤±æ•—:', error);
                document.getElementById('loading').innerHTML = 'è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢';
            }
        }

        // æ¸²æŸ“è¡Œäº‹æ›†
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // æ›´æ–°æœˆä»½é¡¯ç¤º
            document.getElementById('currentMonth').textContent = 
                `${year}å¹´${month + 1}æœˆ`;
            
            // å–å¾—è©²æœˆç¬¬ä¸€å¤©å’Œæœ€å¾Œä¸€å¤©
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const prevLastDay = new Date(year, month, 0);
            
            // è¨ˆç®—éœ€è¦é¡¯ç¤ºçš„æ—¥æœŸ
            const startDate = firstDay.getDay();
            const endDate = lastDay.getDate();
            const prevEndDate = prevLastDay.getDate();
            
            const calendarDays = document.getElementById('calendarDays');
            calendarDays.innerHTML = '';
            
            // ä¸Šå€‹æœˆçš„æ—¥æœŸ
            for (let i = startDate - 1; i >= 0; i--) {
                const day = createDayElement(prevEndDate - i, month - 1, year, true);
                calendarDays.appendChild(day);
            }
            
            // ç•¶æœˆçš„æ—¥æœŸ
            for (let i = 1; i <= endDate; i++) {
                const day = createDayElement(i, month, year, false);
                calendarDays.appendChild(day);
            }
            
            // ä¸‹å€‹æœˆçš„æ—¥æœŸ
            const remainingDays = 42 - (startDate + endDate);
            for (let i = 1; i <= remainingDays; i++) {
                const day = createDayElement(i, month + 1, year, true);
                calendarDays.appendChild(day);
            }
        }

        // å‰µå»ºæ—¥æœŸå…ƒç´ 
        function createDayElement(date, month, year, isOtherMonth) {
            const dayEl = document.createElement('div');
            dayEl.className = 'day';
            if (isOtherMonth) dayEl.classList.add('other-month');
            
            // åˆ¤æ–·æ˜¯å¦ç‚ºä»Šå¤©æˆ–éå»æ—¥æœŸ
            const today = new Date();
            const currentDateOnly = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const dayDate = new Date(year, month, date);
            const dayDateOnly = new Date(dayDate.getFullYear(), dayDate.getMonth(), dayDate.getDate());
            
            if (dayDateOnly.getTime() === currentDateOnly.getTime()) {
                dayEl.classList.add('today');
            } else if (dayDateOnly.getTime() < currentDateOnly.getTime()) {
                dayEl.classList.add('past');
            }
            
            const dayNumber = document.createElement('div');
            dayNumber.className = 'day-number';
            dayNumber.textContent = date;
            dayEl.appendChild(dayNumber);
            
            // æª¢æŸ¥è©²æ—¥æœŸæ˜¯å¦æœ‰æ´»å‹•
            const dayEvents = getEventsForDate(new Date(year, month, date));
            if (dayEvents.length > 0) {
                dayEl.classList.add('has-events');
                
                // æ ¹æ“šæ´»å‹•åˆ†é¡æ·»åŠ æ¨£å¼é¡åˆ¥
                const categories = [...new Set(dayEvents.map(event => event['åˆ†é¡']))];
                const hasAlumni = categories.includes('æ ¡å‹æœƒ');
                const hasOther = categories.includes('å…¶ä»–æ´»å‹•');
                
                if (hasAlumni) {
                    dayEl.classList.add('alumni-events');
                } else if (hasOther) {
                    dayEl.classList.add('other-events');
                }
                
                // å‰µå»ºæ´»å‹•åˆ—è¡¨å®¹å™¨
                const eventList = document.createElement('div');
                eventList.className = 'event-list';
                
                // é¡¯ç¤ºæœ€å¤š3å€‹æ´»å‹•åç¨±
                dayEvents.slice(0, 3).forEach(event => {
                    const eventItem = document.createElement('div');
                    eventItem.className = 'event-item';
                    
                    // æ ¹æ“šæ´»å‹•åˆ†é¡æ·»åŠ æ¨£å¼é¡åˆ¥
                    if (event['åˆ†é¡'] === 'æ ¡å‹æœƒ') {
                        eventItem.classList.add('alumni');
                    } else if (event['åˆ†é¡'] === 'å…¶ä»–æ´»å‹•') {
                        eventItem.classList.add('other');
                    }
                    
                    // æ ¹æ“šæ—¥æœŸæ·»åŠ æ™‚é–“ç‹€æ…‹æ¨£å¼
                    const today = new Date();
                    const todayDateOnly = new Date(today.getFullYear(), today.getMonth(), today.getDate());
                    const eventDate = new Date(year, month, date);
                    const eventDateOnly = new Date(eventDate.getFullYear(), eventDate.getMonth(), eventDate.getDate());
                    
                    if (eventDateOnly.getTime() === todayDateOnly.getTime()) {
                        eventItem.classList.add('today');
                    } else if (eventDateOnly.getTime() < todayDateOnly.getTime()) {
                        eventItem.classList.add('past');
                    }
                    
                    // åˆ¤æ–·ç•¶å‰æ—¥æœŸåœ¨æ´»å‹•ä¸­çš„ä½ç½®
                    const currentDate = new Date(year, month, date);
                    const startDate = new Date(event.startDate);
                    const endDate = new Date(event.endDate);
                    
                    const currentDateOnly = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());
                    const startDateOnly = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
                    const endDateOnly = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());
                    
                    let displayText = event['æ´»å‹•åç¨±'];
                    
                    // å…ˆè¨­ç½®æ´»å‹•åç¨±
                    eventItem.textContent = displayText;
                    
                    // å¦‚æœæ˜¯å¤šæ—¥æ´»å‹•ï¼Œæ·»åŠ è¦–è¦ºé€£æ¥æ•ˆæœ
                    if (startDateOnly.getTime() !== endDateOnly.getTime()) {
                        eventItem.classList.add('multi-day');
                        
                        if (currentDateOnly.getTime() === startDateOnly.getTime()) {
                            eventItem.classList.add('multi-day-start');
                        } else if (currentDateOnly.getTime() === endDateOnly.getTime()) {
                            eventItem.classList.add('multi-day-end');
                        } else {
                            eventItem.classList.add('multi-day-middle');
                        }
                    }
                    eventList.appendChild(eventItem);
                });
                
                dayEl.appendChild(eventList);
                
                dayEl.addEventListener('click', () => showEvents(dayEvents, new Date(year, month, date)));
            }
            
            return dayEl;
        }

        // ç²å–ç‰¹å®šæ—¥æœŸçš„æ´»å‹•
        function getEventsForDate(date) {
            return events.filter(event => {
                const startDate = new Date(event.startDate);
                const endDate = new Date(event.endDate);
                
                // å°‡æ™‚é–“è¨­ç‚ºç•¶å¤©çš„é–‹å§‹å’ŒçµæŸï¼Œä»¥ä¾¿æ­£ç¢ºæ¯”è¼ƒæ—¥æœŸ
                const checkDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
                const eventStartDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
                const eventEndDate = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());
                
                // æª¢æŸ¥æŒ‡å®šæ—¥æœŸæ˜¯å¦åœ¨æ´»å‹•çš„é–‹å§‹å’ŒçµæŸæ—¥æœŸä¹‹é–“ï¼ˆåŒ…å«é‚Šç•Œï¼‰
                return checkDate >= eventStartDate && checkDate <= eventEndDate;
            });
        }

        // é¡¯ç¤ºæ´»å‹•è©³æƒ…
        function showEvents(dayEvents, clickedDate) {
            if (dayEvents.length === 0) return;
            
            if (dayEvents.length === 1) {
                // åªæœ‰ä¸€å€‹æ´»å‹•ï¼Œç›´æ¥é¡¯ç¤ºæ´»å‹•è©³æƒ…
                showSingleEvent(dayEvents[0]);
            } else {
                // æœ‰å¤šå€‹æ´»å‹•ï¼Œé¡¯ç¤ºæ´»å‹•é¸æ“‡åˆ—è¡¨
                showEventsList(dayEvents, clickedDate);
            }
        }

        // é¡¯ç¤ºå–®ä¸€æ´»å‹•è©³æƒ…
        function showSingleEvent(event) {
            // éš±è—æ´»å‹•åˆ—è¡¨ï¼Œé¡¯ç¤ºæ´»å‹•è©³æƒ…
            document.getElementById('eventsList').style.display = 'none';
            document.getElementById('eventDetails').style.display = 'block';
            document.getElementById('backToList').style.display = 'none';
            
            // è¨­å®šæ¨™é¡Œ
            const startDate = new Date(event.startDate);
            const endDate = new Date(event.endDate);
            const startDateOnly = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
            const endDateOnly = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());
            
            let titleText = event['æ´»å‹•åç¨±'];
            
            // å¦‚æœæ˜¯å¤šæ—¥æ´»å‹•ï¼Œåœ¨æ¨™é¡Œä¸­é¡¯ç¤ºæ—¥æœŸç¯„åœ
            if (startDateOnly.getTime() !== endDateOnly.getTime()) {
                const formatDate = (date) => `${date.getMonth() + 1}/${date.getDate()}`;
                titleText += ` (${formatDate(startDate)} - ${formatDate(endDate)})`;
            }
            
            document.getElementById('modalTitle').textContent = titleText;
            
            // è¨­å®šéºµåŒ…å±‘
            const breadcrumb = document.getElementById('breadcrumb');
            breadcrumb.innerHTML = '';
            
            if (event['åˆ†é¡']) {
                const item = document.createElement('span');
                item.className = 'breadcrumb-item';
                item.textContent = event['åˆ†é¡'];
                breadcrumb.appendChild(item);
            }
            
            if (event['æ´»å‹•åœ°é»åˆ†é¡']) {
                const item = document.createElement('span');
                item.className = 'breadcrumb-item';
                item.textContent = event['æ´»å‹•åœ°é»åˆ†é¡'];
                breadcrumb.appendChild(item);
            }
            
            if (event['æ´»å‹•æ€§è³ª']) {
                const item = document.createElement('span');
                item.className = 'breadcrumb-item';
                item.textContent = event['æ´»å‹•æ€§è³ª'];
                breadcrumb.appendChild(item);
            }
            
            // è¨­å®šæ´»å‹•åŸºæœ¬è³‡è¨Š
            const eventInfo = document.getElementById('eventInfo');
            let infoHTML = '';
            
            // æ´»å‹•æ™‚é–“
            const formatDateTime = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
                const weekday = weekdays[date.getDay()];
                return `${year}å¹´${month}æœˆ${day}æ—¥ (${weekday})`;
            };
            
            if (startDateOnly.getTime() === endDateOnly.getTime()) {
                infoHTML += `
                    <div class="event-info-item">
                        <div class="event-info-label">æ´»å‹•æ™‚é–“ï¼š</div>
                        <div class="event-info-value">${formatDateTime(startDate)}</div>
                    </div>
                `;
            } else {
                infoHTML += `
                    <div class="event-info-item">
                        <div class="event-info-label">æ´»å‹•æ™‚é–“ï¼š</div>
                        <div class="event-info-value">${formatDateTime(startDate)} - ${formatDateTime(endDate)}</div>
                    </div>
                `;
            }
            
            // æ´»å‹•åœ°é»
            if (event['æ´»å‹•åœ°é»']) {
                infoHTML += `
                    <div class="event-info-item">
                        <div class="event-info-label">æ´»å‹•åœ°é»ï¼š</div>
                        <div class="event-info-value">${event['æ´»å‹•åœ°é»']}</div>
                    </div>
                `;
            }
            
            // æ´»å‹•å–®ä½
            if (event['æ´»å‹•å–®ä½']) {
                infoHTML += `
                    <div class="event-info-item">
                        <div class="event-info-label">ä¸»è¾¦å–®ä½ï¼š</div>
                        <div class="event-info-value">${event['æ´»å‹•å–®ä½']}</div>
                    </div>
                `;
            }
            
            eventInfo.innerHTML = infoHTML;
            
            // è¨­å®šæ´»å‹•é€£çµ
            const eventLink = document.getElementById('eventLink');
            if (event['æ´»å‹•ç›¸é—œé€£çµ']) {
                eventLink.href = event['æ´»å‹•ç›¸é—œé€£çµ'];
                eventLink.style.display = 'inline-block';
            } else {
                eventLink.style.display = 'none';
            }
            
            // è¨­å®šåŸå§‹è³‡æ–™
            document.getElementById('eventContent').textContent = event['åŸå§‹è³‡æ–™'] || 'ç„¡è©³ç´°è³‡æ–™';
            
            // é¡¯ç¤º Modal
            document.getElementById('eventModal').style.display = 'block';
        }

        // é¡¯ç¤ºå¤šå€‹æ´»å‹•çš„é¸æ“‡åˆ—è¡¨
        function showEventsList(dayEvents, clickedDate) {
            // é¡¯ç¤ºæ´»å‹•åˆ—è¡¨ï¼Œéš±è—æ´»å‹•è©³æƒ…
            document.getElementById('eventsList').style.display = 'block';
            document.getElementById('eventDetails').style.display = 'none';
            document.getElementById('backToList').style.display = 'none';
            
            // ä½¿ç”¨è¢«é»æ“Šçš„æ—¥æœŸä¾†é¡¯ç¤ºåœ¨æ¨™é¡Œ
            const dateText = `${clickedDate.getFullYear()}å¹´${clickedDate.getMonth() + 1}æœˆ${clickedDate.getDate()}æ—¥`;
            
            document.getElementById('modalTitle').textContent = `${dateText} çš„æ´»å‹• (${dayEvents.length} å€‹)`;
            
            // ç”Ÿæˆæ´»å‹•åˆ—è¡¨
            const eventsListContainer = document.getElementById('eventsListContainer');
            eventsListContainer.innerHTML = dayEvents.map((event, index) => {
                const startDate = new Date(event.startDate);
                const endDate = new Date(event.endDate);
                const startDateOnly = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
                const endDateOnly = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());
                
                // æ ¼å¼åŒ–æ—¥æœŸé¡¯ç¤º
                let dateDisplay = '';
                if (startDateOnly.getTime() !== endDateOnly.getTime()) {
                    const formatDate = (date) => `${date.getMonth() + 1}/${date.getDate()}`;
                    dateDisplay = ` (${formatDate(startDate)} - ${formatDate(endDate)})`;
                }
                
                const categoryClass = event['åˆ†é¡'] === 'æ ¡å‹æœƒ' ? 'alumni' : 'other';
                const description = event['åŸå§‹è³‡æ–™'] ? 
                    event['åŸå§‹è³‡æ–™'].substring(0, 80) + (event['åŸå§‹è³‡æ–™'].length > 80 ? '...' : '') : 
                    'ç„¡è©³ç´°æè¿°';
                
                return `
                    <div class="event-list-item ${categoryClass}" onclick="showSingleEventFromList(${index})">
                        <div class="event-list-header">
                            <div class="event-list-title">${event['æ´»å‹•åç¨±']}${dateDisplay}</div>
                        </div>
                        <div class="event-list-meta">
                            <span class="event-list-category ${categoryClass}">${event['åˆ†é¡'] || 'å…¶ä»–'}</span>
                            ${event['æ´»å‹•åœ°é»åˆ†é¡'] ? `<span class="event-list-category ${categoryClass}">${event['æ´»å‹•åœ°é»åˆ†é¡']}</span>` : ''}
                        </div>
                        <div class="event-list-description">${description}</div>
                    </div>
                `;
            }).join('');
            
            // å„²å­˜ç•¶å‰çš„æ´»å‹•åˆ—è¡¨å’Œé»æ“Šæ—¥æœŸä»¥ä¾›å¾ŒçºŒä½¿ç”¨
            window.currentDayEvents = dayEvents;
            window.currentClickedDate = clickedDate;
            
            // é¡¯ç¤º Modal
            document.getElementById('eventModal').style.display = 'block';
        }

        // å¾æ´»å‹•åˆ—è¡¨ä¸­é¸æ“‡ç‰¹å®šæ´»å‹•é¡¯ç¤ºè©³æƒ…
        function showSingleEventFromList(eventIndex) {
            const event = window.currentDayEvents[eventIndex];
            // é¡¯ç¤ºè¿”å›æŒ‰éˆ•
            document.getElementById('backToList').style.display = 'inline-block';
            showSingleEvent(event);
        }

        // è¿”å›æ´»å‹•åˆ—è¡¨
        function backToEventsList() {
            if (window.currentDayEvents && window.currentDayEvents.length > 1) {
                showEventsList(window.currentDayEvents, window.currentClickedDate);
            }
        }

        // ç²å–è¿‘å…©é€±æ´»å‹•
        function getUpcomingEvents() {
            const today = new Date();
            const twoWeeksLater = new Date(today.getTime() + 14 * 24 * 60 * 60 * 1000);
            
            return events.filter(event => {
                const eventStartDate = new Date(event.startDate);
                const eventEndDate = new Date(event.endDate);
                
                // æª¢æŸ¥æ´»å‹•æ˜¯å¦åœ¨è¿‘å…©é€±å…§é–‹å§‹æˆ–æ­£åœ¨é€²è¡Œ
                return (eventStartDate >= today && eventStartDate <= twoWeeksLater) ||
                       (eventStartDate <= today && eventEndDate >= today);
            }).sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
        }

        // é¡¯ç¤ºè¿‘æœŸæ´»å‹•modal
        function showUpcomingEventsModal() {
            const upcomingEvents = getUpcomingEvents();
            const upcomingEventsList = document.getElementById('upcomingEventsList');
            
            if (upcomingEvents.length === 0) {
                upcomingEventsList.innerHTML = `
                    <div class="no-upcoming-events">
                        <div class="icon">ğŸ“…</div>
                        <h3>è¿‘å…©é€±æš«ç„¡æ´»å‹•</h3>
                        <p>è«‹æŸ¥çœ‹è¡Œäº‹æ›†äº†è§£æ›´å¤šæ´»å‹•è³‡è¨Š</p>
                    </div>
                `;
            } else {
                upcomingEventsList.innerHTML = upcomingEvents.map(event => {
                    const startDate = new Date(event.startDate);
                    const endDate = new Date(event.endDate);
                    const today = new Date();
                    
                    // æ ¼å¼åŒ–æ—¥æœŸ
                    const formatDate = (date) => {
                        const month = date.getMonth() + 1;
                        const day = date.getDate();
                        const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
                        const weekday = weekdays[date.getDay()];
                        return `${month}/${day} (${weekday})`;
                    };
                    
                    let dateText;
                    const startDateOnly = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
                    const endDateOnly = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());
                    
                    if (startDateOnly.getTime() === endDateOnly.getTime()) {
                        dateText = formatDate(startDate);
                    } else {
                        dateText = `${formatDate(startDate)} - ${formatDate(endDate)}`;
                    }
                    
                    // åˆ¤æ–·æ´»å‹•ç‹€æ…‹
                    const todayOnly = new Date(today.getFullYear(), today.getMonth(), today.getDate());
                    let statusText = '';
                    if (startDateOnly.getTime() === todayOnly.getTime()) {
                        statusText = ' (ä»Šå¤©)';
                    } else if (startDateOnly <= todayOnly && endDateOnly >= todayOnly) {
                        statusText = ' (é€²è¡Œä¸­)';
                    }
                    
                    const categoryClass = event['åˆ†é¡'] === 'æ ¡å‹æœƒ' ? 'alumni' : 'other';
                    const description = event['åŸå§‹è³‡æ–™'] ? 
                        event['åŸå§‹è³‡æ–™'].substring(0, 100) + (event['åŸå§‹è³‡æ–™'].length > 100 ? '...' : '') : 
                        'ç„¡è©³ç´°æè¿°';
                    
                    return `
                        <div class="upcoming-event-item ${categoryClass}" onclick="showEventFromUpcoming('${event['æ´»å‹•åç¨±']}')">
                            <div class="upcoming-event-header">
                                <div class="upcoming-event-title">${event['æ´»å‹•åç¨±']}</div>
                                <div class="upcoming-event-date">${dateText}${statusText}</div>
                            </div>
                            <div>
                                <span class="upcoming-event-category ${categoryClass}">${event['åˆ†é¡'] || 'å…¶ä»–'}</span>
                                ${event['æ´»å‹•åœ°é»åˆ†é¡'] ? `<span class="upcoming-event-category ${categoryClass}">${event['æ´»å‹•åœ°é»åˆ†é¡']}</span>` : ''}
                            </div>
                            <div class="upcoming-event-description">${description}</div>
                        </div>
                    `;
                }).join('');
            }
            
            document.getElementById('upcomingEventsModal').style.display = 'block';
        }

        // å¾è¿‘æœŸæ´»å‹•modalä¸­é¡¯ç¤ºç‰¹å®šæ´»å‹•è©³æƒ…
        function showEventFromUpcoming(eventName) {
            const event = events.find(e => e['æ´»å‹•åç¨±'] === eventName);
            if (event) {
                document.getElementById('upcomingEventsModal').style.display = 'none';
                showSingleEvent(event);
            }
        }

        // è¨­å®šäº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            // ä¸Šä¸€å€‹æœˆ
            document.getElementById('prevMonth').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });
            
            // ä¸‹ä¸€å€‹æœˆ
            document.getElementById('nextMonth').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });
            
            // é—œé–‰æ´»å‹•è©³æƒ… Modal
            document.getElementById('closeModal').addEventListener('click', () => {
                document.getElementById('eventModal').style.display = 'none';
            });
            
            // é»æ“Šæ´»å‹•è©³æƒ… Modal å¤–éƒ¨é—œé–‰
            document.getElementById('eventModal').addEventListener('click', (e) => {
                if (e.target.id === 'eventModal') {
                    document.getElementById('eventModal').style.display = 'none';
                }
            });

            // é—œé–‰è¿‘æœŸæ´»å‹• Modal
            document.getElementById('closeUpcomingModal').addEventListener('click', () => {
                document.getElementById('upcomingEventsModal').style.display = 'none';
            });

            document.getElementById('closeUpcomingBtn').addEventListener('click', () => {
                document.getElementById('upcomingEventsModal').style.display = 'none';
            });
            
            // é»æ“Šè¿‘æœŸæ´»å‹• Modal å¤–éƒ¨é—œé–‰
            document.getElementById('upcomingEventsModal').addEventListener('click', (e) => {
                if (e.target.id === 'upcomingEventsModal') {
                    document.getElementById('upcomingEventsModal').style.display = 'none';
                }
            });

            // è¨­å®šæ—¥æ›†æ»‘å‹•æ‰‹å‹¢
            setupCalendarSwipe();
        }

        // è¨­å®šæ—¥æ›†æ»‘å‹•æ‰‹å‹¢
        function setupCalendarSwipe() {
            const calendar = document.getElementById('calendar');
            const swipeContainer = document.getElementById('calendarSwipeContainer');
            let startX = 0;
            let startY = 0;
            let currentX = 0;
            let isSwipeActive = false;
            let swipeThreshold = 80; // è§¸ç™¼åˆ‡æ›çš„æœ€å°æ»‘å‹•è·é›¢
            let isAnimating = false;
            let tempContainer = null; // è‡¨æ™‚å®¹å™¨ï¼Œç”¨æ–¼å¯¦ç¾é€£çºŒæ•ˆæœ

            // è§¸æ§é–‹å§‹
            calendar.addEventListener('touchstart', (e) => {
                if (isAnimating) return;
                
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                currentX = startX;
                isSwipeActive = false;
                
                // ç§»é™¤éæ¸¡æ•ˆæœï¼Œè®“æ»‘å‹•æ›´è·Ÿæ‰‹
                swipeContainer.classList.add('no-transition');
            }, { passive: true });

            // è§¸æ§ç§»å‹•
            calendar.addEventListener('touchmove', (e) => {
                if (!startX || isAnimating) return;
                
                currentX = e.touches[0].clientX;
                const currentY = e.touches[0].clientY;
                
                const diffX = currentX - startX;
                const diffY = currentY - startY;
                
                // åˆ¤æ–·æ˜¯å¦ç‚ºæ°´å¹³æ»‘å‹•ï¼ˆæ°´å¹³è·é›¢å¤§æ–¼å‚ç›´è·é›¢ä¸”è¶…éæœ€å°é–¾å€¼ï¼‰
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 15) {
                    // é˜²æ­¢é é¢æ»¾å‹•
                    e.preventDefault();
                    isSwipeActive = true;
                    
                    // è¨ˆç®—æ»‘å‹•è·é›¢ï¼Œé™åˆ¶åœ¨åˆç†ç¯„åœå…§
                    const maxSlide = calendar.offsetWidth * 0.8; // æœ€å¤§æ»‘å‹•è·é›¢ç‚ºå¯¬åº¦çš„80%
                    const slideDistance = Math.max(-maxSlide, Math.min(maxSlide, diffX));
                    
                    // æ‡‰ç”¨æ»‘å‹•è®Šæ›ï¼Œè®“æ•´å€‹æ—¥æ›†è·Ÿéš¨æ‰‹æŒ‡ç§»å‹•
                    swipeContainer.style.transform = `translateX(${slideDistance}px)`;
                    
                    // æ·»åŠ é€æ˜åº¦æ•ˆæœï¼Œè®“æ»‘å‹•æ›´æœ‰å±¤æ¬¡æ„Ÿ
                    const opacity = 1 - Math.abs(slideDistance) / maxSlide * 0.3;
                    swipeContainer.style.opacity = Math.max(0.7, opacity);
                }
            }, { passive: false });

            // è§¸æ§çµæŸ
            calendar.addEventListener('touchend', (e) => {
                if (!startX || isAnimating) return;
                
                const diffX = currentX - startX;
                const absDistance = Math.abs(diffX);
                
                // æ¢å¾©éæ¸¡æ•ˆæœ
                swipeContainer.classList.remove('no-transition');
                swipeContainer.classList.add('fast-transition');
                
                if (isSwipeActive && absDistance > swipeThreshold) {
                    // æ»‘å‹•è·é›¢è¶³å¤ ï¼ŒåŸ·è¡Œåˆ‡æ›
                    isAnimating = true;
                    
                    // æ ¹æ“šæ»‘å‹•æ–¹å‘æ±ºå®šåˆ‡æ›åˆ°å“ªå€‹æœˆä»½
                    const direction = diffX > 0 ? -1 : 1; // å‘å³æ»‘å‹•åˆ‡æ›åˆ°ä¸Šä¸€å€‹æœˆï¼Œå‘å·¦æ»‘å‹•åˆ‡æ›åˆ°ä¸‹ä¸€å€‹æœˆ
                    
                    // å®Œå…¨æ»‘å‡ºï¼ˆç•¶å‰æœˆä»½æ»‘å‡ºï¼‰
                    const slideOutDistance = diffX > 0 ? calendar.offsetWidth : -calendar.offsetWidth;
                    swipeContainer.style.transform = `translateX(${slideOutDistance}px)`;
                    swipeContainer.style.opacity = '0.3';
                    
                    // å»¶é²å¾Œè™•ç†æœˆä»½åˆ‡æ›
                    setTimeout(() => {
                        // ç§»é™¤éæ¸¡æ•ˆæœï¼ˆç‚ºä¸‹ä¸€æ­¥æº–å‚™ï¼‰
                        swipeContainer.classList.remove('fast-transition');
                        
                        // åˆ‡æ›æœˆä»½ä¸¦æ›´æ–°ç•«é¢ï¼ˆç„¡å‹•ç•«ï¼‰
                        currentDate.setMonth(currentDate.getMonth() + direction);
                        renderCalendar();
                        
                        // å®Œå…¨åè½‰æ–¹å‘
                        // å·¦æ»‘æ™‚ï¼šæ–°æœˆä»½å¾å·¦å´(-100%)é–‹å§‹
                        // å³æ»‘æ™‚ï¼šæ–°æœˆä»½å¾å³å´(100%)é–‹å§‹
                        if (diffX > 0) {
                            // å¾€å³æ»‘ - ä¸Šå€‹æœˆå¾å³é‚Šæ»‘å…¥
                            swipeContainer.style.transform = 'translateX(100%)';
                        } else {
                            // å¾€å·¦æ»‘ - ä¸‹å€‹æœˆå¾å·¦é‚Šæ»‘å…¥
                            swipeContainer.style.transform = 'translateX(-100%)';
                        }
                        
                        // ç¢ºä¿ä¸Šè¿°æ¨£å¼ç«‹å³æ‡‰ç”¨
                        setTimeout(() => {
                            // æ·»åŠ éæ¸¡æ•ˆæœ
                            swipeContainer.classList.add('fast-transition');
                            // æ¢å¾©å®Œå…¨ä¸é€æ˜
                            swipeContainer.style.opacity = '1';
                            
                            // åŸ·è¡Œæ»‘å…¥å‹•ç•«ï¼ˆå›åˆ°ä¸­å¿ƒä½ç½®ï¼‰
                            swipeContainer.style.transform = 'translateX(0)';
                            
                            // å‹•ç•«å®Œæˆå¾Œé‡ç½®ç‹€æ…‹
                            setTimeout(() => {
                                swipeContainer.classList.remove('fast-transition');
                                isAnimating = false;
                            }, 250);
                        }, 50);
                    }, 200);
                } else {
                    // æ»‘å‹•è·é›¢ä¸å¤ ï¼Œå›å½ˆåˆ°åŸä½
                    swipeContainer.style.transform = 'translateX(0)';
                    swipeContainer.style.opacity = '1';
                    
                    setTimeout(() => {
                        swipeContainer.classList.remove('fast-transition');
                        isAnimating = false;
                    }, 200);
                }
                
                // é‡ç½®è®Šæ•¸
                startX = 0;
                startY = 0;
                currentX = 0;
                isSwipeActive = false;
            }, { passive: true });

            // è§¸æ§å–æ¶ˆ
            calendar.addEventListener('touchcancel', () => {
                if (isAnimating) return;
                
                // é‡ç½®ç‹€æ…‹
                swipeContainer.classList.remove('no-transition');
                swipeContainer.style.transform = 'translateX(0)';
                swipeContainer.style.opacity = '1';
                
                // é‡ç½®è®Šæ•¸
                startX = 0;
                startY = 0;
                currentX = 0;
                isSwipeActive = false;
            }, { passive: true });
        }

        // å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
        init();
    </script>
</body>
</html>